<!DOCTYPE html>
<html class="writer-html5" lang="ru" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Примеры &mdash; документация МПК Пересвет 0.4</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinxcontrib-httpexample.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=11064190"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/sphinxcontrib-httpexample.js"></script>
        <script src="../_static/translations.js?v=29b1f277"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Алфавитный указатель" href="../genindex.html" />
    <link rel="search" title="Поиск" href="../search.html" />
    <link rel="next" title="Создание экранов в Grafana" href="../grafana/grafana_integration.html" />
    <link rel="prev" title="Конфигуратор модели" href="../configurator/configurator.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo.png" class="logo" alt="Логотип"/>
          </a>
              <div class="version">
                0.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Поиск в документации" aria-label="Поиск в документации" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Меню навигации">
              <p class="caption" role="heading"><span class="caption-text">Содержание:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../description.html">Описание</a></li>
<li class="toctree-l1"><a class="reference internal" href="../terms.html">Используемые термины</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components.html">Компоненты системы</a></li>
<li class="toctree-l1"><a class="reference internal" href="../historical_data.html">Исторические данные</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Установка и запуск</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configurator/configurator.html">Конфигуратор модели</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Примеры работы с платформой</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id3">Простой пример с одним объектом</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">1. Объект</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">2. Теги</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">3. Запись/чтение данных</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">4. Расчётный метод</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">5. Запуск расчётного метода</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">6. Проверим расчёт</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grafana">7. Отображение данных в Grafana</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../grafana/grafana_integration.html">Создание экранов в Grafana</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Меню навигации для мобильных устройств" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">МПК Пересвет</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Навигация по страницам">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Примеры</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/examples.rst.txt" rel="nofollow"> Просмотреть исходный код страницы</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="examples">
<span id="id1"></span><h1>Примеры<a class="headerlink" href="#examples" title="Link to this heading"></a></h1>
<p>Для демонстрации работы с платформой создан отдельный
<a class="reference external" href="https://github.com/Vovaman/peresvet_examples">проект</a>, пополняемый новыми примерами.</p>
<p>Также в указанном проекте можно создавать новые задачи с запросами на новые примеры.</p>
<p>Здесь рассмотрим самый простой пример.</p>
<section id="id3">
<h2>Простой пример с одним объектом<a class="headerlink" href="#id3" title="Link to this heading"></a></h2>
<p>Для демонстрации работы с объектами, тегами, методами и экранами Grafana сделаем следующий пример.</p>
<p>Допустим, у нас есть лампочка и мы можем тем или иным способом получить
данные по току и напряжению (работу с коннекторами рассмотрим в следующих примерах).</p>
<p>Кроме тока и напряжения у лампочки есть третий, расчётный тег - мощность.</p>
<p>При изменении силы тока или напряжения мощность должна перерасчитываться.</p>
<section id="id4">
<h3>1. Объект<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<p>Открываем конфигуратор, выбираем папку «Объекты» и нажимаем кнопку «Новый объект»:</p>
<figure class="align-default">
<img alt="../_images/01.start.png" src="../_images/01.start.png" />
</figure>
<p>В появившемся окне свойств меняем имя объекта на «Лампочка»…</p>
<figure class="align-default">
<img alt="../_images/02.before_save.png" src="../_images/02.before_save.png" />
</figure>
<p>…и, нажав кнопку «Записать», сохраняем изменения:</p>
<figure class="align-default">
<img alt="../_images/03.after_save.png" src="../_images/03.after_save.png" />
</figure>
</section>
<section id="id5">
<h3>2. Теги<a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<p>Оставляя текущим объектом «Лампочку», нажимаем кнопку «Новый тег»:</p>
<figure class="align-default">
<img alt="../_images/04.new_tag.png" src="../_images/04.new_tag.png" />
</figure>
<p>Меняем имя тега и единицы измерения…</p>
<figure class="align-default">
<img alt="../_images/05.tag_props.png" src="../_images/05.tag_props.png" />
</figure>
<p>…и, нажав кнопку «Записать», сохраняем изменения:</p>
<figure class="align-default">
<img alt="../_images/06.tag_saved_props.png" src="../_images/06.tag_saved_props.png" />
</figure>
<p>Аналогичным образом создаём ещё два тега, U и P:</p>
<figure class="align-default">
<img alt="../_images/07.IUP.png" src="../_images/07.IUP.png" />
</figure>
</section>
<section id="id6">
<h3>3. Запись/чтение данных<a class="headerlink" href="#id6" title="Link to this heading"></a></h3>
<p>Проверим, что данные в теги записываются и читаются.</p>
<p>Выберем тег «I» и откроем панель «Данные тега»:</p>
<figure class="align-default">
<img alt="../_images/08.open_read_save.png" src="../_images/08.open_read_save.png" />
</figure>
<ol class="arabic simple">
<li><p>В поле «Значение» впишем 0.</p></li>
<li><p>В поле «body» можно посмотреть сформированное тело запроса на запись.</p></li>
</ol>
<figure class="align-default">
<img alt="../_images/09.set_data.png" src="../_images/09.set_data.png" />
</figure>
<p>Нажимаем кнопку «Записать», затем «Получить данные».</p>
<p>В таблице «Значение-время-качество» появится текущее значение тега «I»:</p>
<figure class="align-default">
<img alt="../_images/10.get_data.png" src="../_images/10.get_data.png" />
</figure>
</section>
<section id="id7">
<h3>4. Расчётный метод<a class="headerlink" href="#id7" title="Link to this heading"></a></h3>
<p>Создадим метод для расчёта мощности лампочки.</p>
<p>Для этого выберем тег «P» и нажмём кнопку «Новый метод»:</p>
<figure class="align-default">
<img alt="../_images/11.new_method.png" src="../_images/11.new_method.png" />
</figure>
<p>Затем:</p>
<ol class="arabic">
<li><p>Изменим имя метода</p></li>
<li><p>В поле «Адрес» введём название метода, под которым он будет зарегистрирован в системе для вызовов.
Запомним это имя - <code class="docutils literal notranslate"><span class="pre">power</span></code>:</p>
<figure class="align-default">
<img alt="../_images/12.method_name_address.png" src="../_images/12.method_name_address.png" />
</figure>
</li>
<li><p>Блок «Инициаторы». Очень важный блок, в котором мы выбираем, какие события могут инициировать выполнение
расчётного метода.</p>
<p>Здесь выберем оба предложенных тега: I и U, то есть изменения обоих этих тегов будут приводить к
перерасчёту мощности.</p>
<div class="admonition attention">
<p class="admonition-title">Внимание</p>
<p>Обратите внимание, что в списке возможных инициаторов расчёта нет самого тега
«P»: изменение тега не может приводить к перерасчёту его самого, так как это вызовет бесконечный цикл
расчётов.</p>
</div>
<figure class="align-default">
<img alt="../_images/13.method_initiators.png" src="../_images/13.method_initiators.png" />
</figure>
</li>
<li><p>Укажем, какие данные необходимо передать методу для расчёта.</p>
<p>Данные, передаваемые в метод в каждом параметре - это результат запроса
<a class="reference internal" href="../data_api.html#tags_app_api_svc.data_get" title="tags_app_api_svc.data_get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">получения</span> <span class="pre">данных</span></code></a>.</p>
<p>Для расчёта мощности нужны текущие значения двух тегов: силы тока и напряжения.
Поэтому создаём два параметра, дважды нажав на синюю кнопку с плюсом.
Заполняем данные параметров как показано на картинке:</p>
<figure class="align-default">
<img alt="../_images/14.method_parameters.png" src="../_images/14.method_parameters.png" />
</figure>
<p>Здесь мы указали, что в метод передаются два параметра: первым (индекс = 1) - сила тока.</p>
<p>Вторым (индекс = 2) - напряжение.</p>
<p>Поле «Конфигурация» заполняется автоматически после выбора тега в поле «Тег».</p>
<div class="admonition attention">
<p class="admonition-title">Внимание</p>
<p>После изучения документации на запрос
<a class="reference internal" href="../data_api.html#tags_app_api_svc.data_get" title="tags_app_api_svc.data_get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">получения</span> <span class="pre">данных</span></code></a> можно вручную править поле «Конфигурация»,
составляя сколь угодно сложные запросы получения данных. Поле «Конфигурация» можно расширять
для удобства ввода текста.</p>
<figure class="align-default">
<img alt="../_images/15.extend_config.png" src="../_images/15.extend_config.png" />
</figure>
</div>
<div class="admonition attention">
<p class="admonition-title">Внимание</p>
<p>Очень важный момент, относящийся к расчётам значений тегов: тег мощности рассчитывается,
когда изменяется значение тегов «I» и «U». Допустим, расчёт инициируется изменением тега «I» и метка
времени нового значения «I» - «2024-10-27 10:00:00+03:00». В этом случае запрос данных в параметрах
будет производиться также на метку времени «2024-10-27 10:00:00+03:00» и новое рассчитанное значение
тега мощности также будет записано с этой меткой времени, не смотря на то, что сам расчёт, возможно,
будет производиться в другое время.</p>
</div>
</li>
<li><p>Нажимаем кнопку «Записать» для сохранения изменений:</p>
<figure class="align-default">
<img alt="../_images/16.save_method.png" src="../_images/16.save_method.png" />
</figure>
</li>
</ol>
<p>Теперь напишем код метода.</p>
<p>В папке <code class="docutils literal notranslate"><span class="pre">methods</span></code> проекта <a class="reference external" href="https://github.com/Vovaman/peresvet">https://github.com/Vovaman/peresvet</a> уже написан метод для этого примера.</p>
<p>Откроем файл <code class="docutils literal notranslate"><span class="pre">methods/test_method.py</span></code> и рассмотрим метод <code class="docutils literal notranslate"><span class="pre">calc_power</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@rpc</span><span class="p">(</span><span class="s2">&quot;power&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">calc_power</span><span class="p">(</span><span class="n">I</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">U</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Метод возвращает произведение двух параметров.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;I: </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">I</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;U: </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">U</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">cur_I</span> <span class="o">=</span> <span class="n">I</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">cur_U</span> <span class="o">=</span> <span class="n">U</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">cur_I</span> <span class="o">==</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">cur_U</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">return</span> <span class="n">cur_I</span> <span class="o">*</span> <span class="n">cur_U</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="admonition-title">Внимание</p>
<p>Первая строка: <code class="docutils literal notranslate"><span class="pre">&#64;rpc(&quot;power&quot;)</span></code>: именно «power» мы вводили в поле
«Адрес» при создании метода!</p>
</div>
<p>Далее - строка объявления метода: <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">calc_power(I:</span> <span class="pre">dict,</span> <span class="pre">U:</span> <span class="pre">dict)</span> <span class="pre">-&gt;</span> <span class="pre">float:</span></code>.
Первым параметром указана сила тока, вторым - напряжение. Точно так же, как мы указывали
индексы у параметров.</p>
<p>Далее метод просто для удобства выводит в консоль пришедшие данные, затем рассчитывает мощность
как произведение двух параметров.</p>
</section>
<section id="id8">
<h3>5. Запуск расчётного метода<a class="headerlink" href="#id8" title="Link to this heading"></a></h3>
<p>Для запуска метода необходимо установить пакеты, указанные в файле <code class="docutils literal notranslate"><span class="pre">methods/requirements.txt</span></code> либо
для всех пользователей:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
<p>Либо создав виртуальную среду проекта.</p>
<p>После установки пакетов запускаем в терминале скрипт в папке <code class="docutils literal notranslate"><span class="pre">methods</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>python3<span class="w"> </span>test_method.py
</pre></div>
</div>
<p>Результат должен быть примерно таким:</p>
<figure class="align-default">
<img alt="../_images/17.run_method.png" src="../_images/17.run_method.png" />
</figure>
</section>
<section id="id9">
<h3>6. Проверим расчёт<a class="headerlink" href="#id9" title="Link to this heading"></a></h3>
<p>Помним, что расчёт мощности инициируется изменениями значений тока и напряжения.</p>
<p>Запишем в тег «U» значение 230.</p>
<p>Для этого выберем в иерархии тег «U» и запишем в него требуемое значение:</p>
<figure class="align-default">
<img alt="../_images/18.set_u.png" src="../_images/18.set_u.png" />
</figure>
<p>В консоли, в которой мы запустили метод, появится вывод:</p>
<figure class="align-default">
<img alt="../_images/19.print_calc.png" src="../_images/19.print_calc.png" />
</figure>
<p>Проверим значение тега мощности «P». Оно должно быть равно 0, так как перед этим
в тег «I» мы записали 0:</p>
<figure class="align-default">
<img alt="../_images/20.P_is_0.png" src="../_images/20.P_is_0.png" />
</figure>
<p>Теперь запишем в тег «I» значение 1:</p>
<figure class="align-default">
<img alt="../_images/21.I_is_1.png" src="../_images/21.I_is_1.png" />
</figure>
<p>И проверим значение мощности, которое должно быть равно 230 Вт:</p>
<figure class="align-default">
<img alt="../_images/22.P_is_230.png" src="../_images/22.P_is_230.png" />
</figure>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>В следующих примерах будет показано, как настроить получение данных в теги
из внешних источников.</p>
</div>
</section>
<section id="grafana">
<h3>7. Отображение данных в Grafana<a class="headerlink" href="#grafana" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>Данные из платформы можно получать
<a class="reference internal" href="../data_api.html#tags_app_api_svc.data_get" title="tags_app_api_svc.data_get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">описанным</span> <span class="pre">в</span> <span class="pre">документации</span> <span class="pre">запросом</span></code></a>.</p>
<p>Данные тегов (как, впрочем, и всё общение с платформой) приходят в виде json и для манипулирования
этими данными в Grafan’е рекомендуется изучить языки манипулирования json-данными
<a class="reference external" href="https://docs.jsonata.org/overview.html">JSONata</a> или
<a class="reference external" href="https://jsonpath.com/">JSONPath</a>.</p>
<p>Предпочтительнее JSONata, так как обладает большими возможностями.</p>
<p>Настроим отображение:</p>
<ul class="simple">
<li><p>текущих значений тегов «I», «U» и «P»;</p></li>
<li><p>трендов значений этих тегов;</p></li>
</ul>
</div>
<ol class="arabic">
<li><p>Создадим новую доску данных.</p>
<p>Для этого заходим в меню «Home –&gt; Dashboards» и нажимаем кнопку «New»</p>
<figure class="align-default">
<img alt="../_images/23.new_dashboard.png" src="../_images/23.new_dashboard.png" />
</figure>
<p>Выбрав в выпадающем меню команду «New dashboard», попадаем на экран создания новой панели:</p>
<figure class="align-default">
<img alt="../_images/24.new_panel.png" src="../_images/24.new_panel.png" />
</figure>
<p>…и выбираем источник данных «peresvet»:</p>
<figure class="align-default">
<img alt="../_images/25.ds.png" src="../_images/25.ds.png" />
</figure>
</li>
<li><p>В появившемся окне настройки панели выберем тип панели «Stat».</p>
<figure class="align-default">
<img alt="../_images/26.stat.png" src="../_images/26.stat.png" />
</figure>
</li>
<li><p>Настроим путь для получения данных, вписав <code class="docutils literal notranslate"><span class="pre">/data/</span></code> на закладке <code class="docutils literal notranslate"><span class="pre">Path</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>По умолчанию в источнике данных «peresvet» настроен путь к
платформе: <code class="docutils literal notranslate"><span class="pre">http://&lt;server&gt;/v1/</span></code>.
Добавляя к этому пути расширения <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">objects</span></code>, <code class="docutils literal notranslate"><span class="pre">tags</span></code> и т.д.,
мы получаем возможность работать не только с данными, но и вообще
со всеми сущностями платформы.</p>
</div>
<figure class="align-default">
<img alt="../_images/27.path.png" src="../_images/27.path.png" />
</figure>
</li>
<li><p>Настроим запросы получения данных.</p>
<p>Для того, чтобы не писать запрос вручную, его можно скопировать из конфигуратора.</p>
<p>Открываем конфигуратор, выбираем тег «I» и копируем запрос получения текущего значения тега.</p>
<figure class="align-default">
<img alt="../_images/28.q.png" src="../_images/28.q.png" />
</figure>
<p>В окне настройки панели выбираем закладку «Params» и добавляем новый ключ «q».
Значение ключа - скопированный нами запрос:</p>
<figure class="align-default" id="id10">
<img alt="../_images/29.params.png" src="../_images/29.params.png" />
<figcaption>
<p><span class="caption-text">Далее:</span><a class="headerlink" href="#id10" title="Link to this image"></a></p>
<div class="legend">
<ol class="arabic simple">
<li><p>Переходим на закладку «Fields»;</p></li>
<li><p>Меняем имя очереди на «I»;</p></li>
<li><p>Вводим выражение на языке JSONPath, разбирающее ответ от платформы с текущим значением тега</p></li>
<li><p>На экране появится «1» - текущее, введённое нами на предыдущих шагах значение тока.</p></li>
</ol>
<figure class="align-default">
<img alt="../_images/30.data.png" src="../_images/30.data.png" />
</figure>
<p>Повторим предыдущие шаги для оставшихся двух тегов напряжения и мощности,
добавляя новые запросы нажатием кнопки «Add query»:</p>
<figure class="align-default">
<img alt="../_images/31.add_query.png" src="../_images/31.add_query.png" />
</figure>
<div class="admonition warning">
<p class="admonition-title">Предупреждение</p>
<p>У каждого поля отменим кэширование данных:</p>
<figure class="align-default">
<img alt="../_images/39.cache.png" src="../_images/39.cache.png" />
</figure>
</div>
</div>
</figcaption>
</figure>
</li>
<li><p>Окончательная настройка панели.</p>
<p>После настройки данных значения напряжения и мощности отображаются красным цветом.
Так выставлены настройки по умолчанию.</p>
<ol class="arabic">
<li><p>Чтобы все значения отражались зелёным цветом, уберём порог значения «80»;</p>
<figure class="align-default">
<img alt="../_images/32.remove_threshold.png" src="../_images/32.remove_threshold.png" />
</figure>
</li>
<li><p>Переименуем панель и нажмем кнопку «Save»:</p>
<figure class="align-default">
<img alt="../_images/33.save.png" src="../_images/33.save.png" />
</figure>
<p>Появится окно, в котором нужно задать имя доски данных.</p>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Предупреждение</p>
<p>Чтобы на панели рядом с именем тега не отображался 0, введите в поля
<code class="docutils literal notranslate"><span class="pre">Alias</span></code> пробел:</p>
<figure class="align-default">
<img alt="../_images/35.space.png" src="../_images/35.space.png" />
</figure>
</div>
</li>
<li><p>Выровняем новую панель на экране и создадим новую панель, с трендом, для чего
выберем команду «Add –&gt; Visualization»:</p>
<figure class="align-default">
<img alt="../_images/34.trend.png" src="../_images/34.trend.png" />
</figure>
</li>
<li><p>Настройка панели с трендом.</p>
<p>Тип панели оставим по умолчанию - «Time series».</p>
<p>Получение данных настроим похоже предыдущей панели, за исключением того, что ключ запроса «q»
будет включать функции Grafan’ы <code class="docutils literal notranslate"><span class="pre">$__isoFrom()</span></code> и <code class="docutils literal notranslate"><span class="pre">$__isoTo()</span></code>, обозначающие начало и конец
запрашиваемого временного периода:</p>
<p><code class="docutils literal notranslate"><span class="pre">q={&quot;tagId&quot;:&quot;2d95d0a6-28c7-103f-9c49-d763ac5895e8&quot;,&quot;format&quot;:true,&quot;start&quot;:&quot;$__isoFrom()&quot;,&quot;finish&quot;:&quot;$__isoTo()&quot;}</span></code>.</p>
<p>Закладки «Fields» у всех трёх запросов должны быть такого вида:</p>
<figure class="align-default">
<img alt="../_images/36.trend_fields.png" src="../_images/36.trend_fields.png" />
</figure>
</li>
<li><p>Выбор временных периодов.</p>
<p>Настроив панель с трендом для отображения трёх тегов, приведём доску данных приблизительно к такому
виду и выберем диапазон времени для отображения на экране, а также периодичность обновления данных:</p>
<figure class="align-default">
<img alt="../_images/37.periods.png" src="../_images/37.periods.png" />
</figure>
</li>
<li><p>Проверим работу модели. Для чего записываем новые значения в теги «I» и «U» и наблюдаем
изменение данных на панели с электрическими параметрами:</p>
<figure class="align-default">
<img alt="../_images/38.check.png" src="../_images/38.check.png" />
</figure>
</li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Нижняя область">
        <a href="../configurator/configurator.html" class="btn btn-neutral float-left" title="Конфигуратор модели" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Предыдущая</a>
        <a href="../grafana/grafana_integration.html" class="btn btn-neutral float-right" title="Создание экранов в Grafana" accesskey="n" rel="next">Следующая <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Авторские права 2024, ООО Матч Поинт Консалтинг. </p>
  </div>

  Собрано при помощи <a href="https://www.sphinx-doc.org/">Sphinx</a> с использованием
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">темы,</a>
    предоставленной <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>